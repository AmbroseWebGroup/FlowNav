let fn;window.addEventListener("load",_=>{fn=new FlowNav},!1);class FlowNav{constructor(a="./flownav/navbar.json"){this.jsonUrl=a,this.domElt=document.getElementById("flownav"),this.domElt.classList.add("preload"),setTimeout(_=>this.domElt.classList.remove("preload"),300),this.renderNav(),document.body.addEventListener("click",a=>{this.domElt.contains(a.target)||Array.from(document.querySelectorAll("#flownav *")).map(a=>{a.classList.remove("open")})},!1)}renderNav(){fetch(this.jsonUrl).then(a=>a.json()).then(a=>{this.navItems=this.generateNavItems(a),this.domElt.appendChild(ml("ul",{},this.navItems))})}generateNavItems(a,b=0){return this.navJson=a,Object.keys(a).map(c=>this.generateNavItem(b,c,a))}generateNavItem(c,a,b){return"string"==typeof b[a]?ml("li",{},[ml("a",{href:b[a],target:"HTTP"==b[a].substring(0,4).toUpperCase()?"_blank":""},a)]):ml("li",{},[ml("button",{onclick:a=>{this.openNavItem(a,c)}},a),ml("ul",{},this.generateNavItems(b[a],c+1))])}openNavItem(c,d){Array.from(document.querySelectorAll("#flownav *")).map(a=>{a.classList.remove("open")});let a=c.target.parentElement;a.classList.add("open");let b=0;for(;b<d;)(a=a.parentElement.parentElement).classList.add("open"),b++}}function ml(e,b,d){var c=document.createElement(e);if(b)for(var a in b)0===a.indexOf("on")?c.addEventListener(a.substr(2).toLowerCase(),b[a],!1):"disabled"==a?c.disabled=b[a]:c.setAttribute(a,b[a]);return d?nester(c,d):c}function nester(c,a){if("string"==typeof a)c.innerHTML=a;else if(a instanceof Array)for(var b=0;b<a.length;b++)"string"==typeof a[b]?(n=document.createTextNode(a[b]),c.appendChild(n)):a[b]instanceof Node&&c.appendChild(a[b]);else a instanceof Node&&c.appendChild(a);return c}
