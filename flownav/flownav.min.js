let fn,fnScript,fnRoot;fnScript=document.currentScript,window.addEventListener("load",_=>{fn=new FlowNav},!1),window.addEventListener("resize",_=>{fn.openState=window.innerWidth<700,fn.toggleNav()},!1);class FlowNav{constructor(){this.rootDir=void 0==fnRoot?".":fnRoot,this.jsonUrl=new URL("./navbar.json",fnScript.src).pathname,this.ham=this.renderHamburger(),this.domElt=document.getElementById("flownav"),this.openState=window.innerWidth<700,this.toggleNav(),this.renderNav(),document.body.addEventListener("click",a=>{this.domElt.contains(a.target)||Array.from(document.querySelectorAll("#flownav *")).map(a=>{a.classList.remove("open")})},!1)}renderHamburger(){let a=document.getElementById("flownav-hamburger");return a.classList.add("hidden"),a.addEventListener("click",_=>this.toggleNav.call(this)),a.innerHTML="Toggle Navigation"+[0,0,0].map(_=>"<span></span>").join(""),a}renderNav(){fetch(this.jsonUrl).then(a=>a.json()).then(a=>{this.navItems=this.generateNavItems(a),this.domElt.appendChild(fn_ml("ul",{},this.navItems))})}generateNavItems(a,b=0){return this.navJson=a,Object.keys(a).map(c=>this.generateNavItem(b,c,a))}generateNavItem(e,a,b){if("string"==typeof b[a]){let c,d;return"/"==b[a].substr(0,1)?(c=this.rootDir+b[a],d=""):(c=b[a],d="_blank"),fn_ml("li",{},[fn_ml("a",{href:c,target:d},a)])}return fn_ml("li",{},[fn_ml("button",{onclick:a=>{this.openNavItem(a,e)}},a),fn_ml("ul",{style:`z-index:-${(e+1)*2}`},this.generateNavItems(b[a],e+1))])}openNavItem(c,d){Array.from(document.querySelectorAll("#flownav *")).map(a=>{a.classList.remove("open")});let a=c.target.parentElement;a.classList.add("open");let b=0;for(;b<d;)(a=a.parentElement.parentElement).classList.add("open"),b++}toggleNav(){this.openState=!this.openState,this.domElt.classList.remove("hidden"),this.domElt.classList.add(this.openState?"preload":"hidden"),this.ham.className=this.openState?"":"hidden",setTimeout(_=>{this.domElt.classList.remove("preload")},300)}setRootDir(a){this.rootDir=a,("/"==a.substr(-1)||"\\"==a.substr(-1))&&(this.rootDir=a.substr(0,a.length-1))}}function fn_ml(e,b,d){var c=document.createElement(e);if(b)for(var a in b)0===a.indexOf("on")?c.addEventListener(a.substr(2).toLowerCase(),b[a],!1):"disabled"==a?c.disabled=b[a]:c.setAttribute(a,b[a]);return d?fn_nester(c,d):c}function fn_nester(c,a){if("string"==typeof a)c.innerHTML=a;else if(a instanceof Array)for(var b=0;b<a.length;b++)"string"==typeof a[b]?(n=document.createTextNode(a[b]),c.appendChild(n)):a[b]instanceof Node&&c.appendChild(a[b]);else a instanceof Node&&c.appendChild(a);return c}
