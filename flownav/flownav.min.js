let fn;window.addEventListener("load",_=>{fn=new FlowNav},!1);class FlowNav{constructor(a="./flownav/navbar.json"){this.jsonUrl=a,this.ham=this.renderHamburger(),this.domElt=document.getElementById("flownav"),this.openState=window.innerWidth>=700,this.initNav(),this.renderNav(),document.body.addEventListener("click",a=>{this.domElt.contains(a.target)||Array.from(document.querySelectorAll("#flownav *")).map(a=>{a.classList.remove("open")})},!1)}renderHamburger(){let a=document.getElementById("flownav-hamburger");return a.classList.add("hidden"),a.addEventListener("click",_=>this.toggleNav.call(this)),a.innerHTML="Toggle Navigation"+[0,0,0].map(_=>"<span></span>").join(""),a}renderNav(){fetch(this.jsonUrl).then(a=>a.json()).then(a=>{this.navItems=this.generateNavItems(a),this.domElt.appendChild(fn_ml("ul",{},this.navItems))})}generateNavItems(a,b=0){return this.navJson=a,Object.keys(a).map(c=>this.generateNavItem(b,c,a))}generateNavItem(c,a,b){return"string"==typeof b[a]?fn_ml("li",{},[fn_ml("a",{href:b[a],target:"HTTP"==b[a].substring(0,4).toUpperCase()?"_blank":""},a)]):fn_ml("li",{},[fn_ml("button",{onclick:a=>{this.openNavItem(a,c)}},a),fn_ml("ul",{style:`z-index:-${(c+1)*2}`},this.generateNavItems(b[a],c+1))])}openNavItem(c,d){Array.from(document.querySelectorAll("#flownav *")).map(a=>{a.classList.remove("open")});let a=c.target.parentElement;a.classList.add("open");let b=0;for(;b<d;)(a=a.parentElement.parentElement).classList.add("open"),b++}initNav(a){this.domElt.classList.remove("hidden"),this.domElt.classList.add(this.openState?"preload":"hidden"),this.openState&&this.ham.classList.toggle("hidden"),setTimeout(_=>{this.domElt.classList.remove("preload")},300)}toggleNav(){this.openState=!this.openState,this.domElt.classList.remove("hidden"),this.domElt.classList.add(this.openState?"preload":"hidden"),this.ham.classList.toggle("hidden"),setTimeout(_=>{this.domElt.classList.remove("preload")},300)}}function fn_ml(e,b,d){var c=document.createElement(e);if(b)for(var a in b)0===a.indexOf("on")?c.addEventListener(a.substr(2).toLowerCase(),b[a],!1):"disabled"==a?c.disabled=b[a]:c.setAttribute(a,b[a]);return d?fn_nester(c,d):c}function fn_nester(c,a){if("string"==typeof a)c.innerHTML=a;else if(a instanceof Array)for(var b=0;b<a.length;b++)"string"==typeof a[b]?(n=document.createTextNode(a[b]),c.appendChild(n)):a[b]instanceof Node&&c.appendChild(a[b]);else a instanceof Node&&c.appendChild(a);return c}
